# トラベルエージェント概要

AWS Bedrock AgentCore、Amplify、React で構築された、旅行計画と予約支援機能を備えた AI 搭載コンシェルジュエージェントです。

このトラベルアシスタントは、目的地調査、天気情報、フライトとホテル検索、AgentCore Gateway を通じた OTA (オンライン旅行代理店) MCP ツールを活用したローカルレコメンデーションなど、すべての旅行関連クエリに特化しています。オファーを比較し、旅程を組み立て、変更を管理し、航空、ホテル、アクティビティなどすべての旅行コンポーネントがユーザーの好みや制約に沿っていることを確認します。

### ユースケース詳細
| 情報                | 詳細                                                                                                                        |
|---------------------|-------------------------------------------------------------------------------------------------------------------------------------|
| ユースケースタイプ   | Agentic Payments                                                                                                            |
| エージェントタイプ   | マルチエージェント                                                                                                          |
| ユースケースコンポーネント | ツール (MCP ベース)、オブザーバビリティ (ログ、メトリクス)                                                                 |
| ユースケース業界     | FSI                                                                                                                         |
| 例の複雑さ          | 上級                                                                                                                        |
| 使用 SDK            | Strands, MCP                                                                                                                |



## 機能

- **旅行計画** - 目的地レコメンデーション、天気、ローカルインサイト
- **カート & 決済** - Visa トークン化対応のカート管理 (フィーチャーフラグで有効化)
- **会話メモリ** - セッション間で永続化されるチャット履歴
- **リアルタイムストリーミング** - ツール使用状況インジケーター付きのライブエージェントレスポンス
- **セキュア認証** - JWT ベース認証を使用した AWS Cognito


## クイックスタート

```bash
# 依存関係のインストール
npm install

# すべてをデプロイ (バックエンド + エージェント + MCP サーバー)
npm run deploy

# ローカル開発サーバーを起動
npm run dev
```

アプリケーションには `https://vcas.local.com:9000/` でアクセスできます

完全なデプロイ手順、設定、トラブルシューティングについては、**[デプロイガイド](DEPLOYMENT.md)** を参照してください。

## プロジェクト構成

```
sample-concierge-agent/
├── amplify/                    # AWS Amplify バックエンド (Cognito, DynamoDB, GraphQL)
├── concierge_agent/           # エージェントコードと Docker コンテナ
│   ├── Dockerfile
│   └── code/                  # Python エージェント実装
├── infrastructure/            # エージェントデプロイ用 CDK インフラストラクチャ
├── web-ui/                    # React フロントエンドアプリケーション
└── scripts/                   # デプロイとセットアップスクリプト
```

## ドキュメント

### デプロイ
- **[デプロイガイド](DEPLOYMENT.md)** - 完全なステップバイステップのデプロイ手順
- **[インフラストラクチャ README](infrastructure/README.md)** - CDK インフラストラクチャの詳細と設定
- **[フロントエンドモックモード](docs/FRONTEND_MOCK_MODE.md)** - バックエンドなしで UI をテスト
- **[Visa ドキュメント](visa-documentation/README.md)** - Visa API ドキュメント

## 前提条件

- Node.js 18+ と npm
- 認証情報が設定された AWS CLI
- Docker (エージェントコンテナのビルド用)

詳細な要件と AWS 権限については、[デプロイガイド](DEPLOYMENT.md#prerequisites) を参照してください。

## 利用可能なスクリプト

| コマンド | 説明 |
|---------|-------------|
| `npm run deploy` | すべてをデプロイ (Amplify + エージェント + ナレッジベース) |
| `npm run deploy:amplify` | Amplify バックエンドのみをデプロイ |
| `npm run deploy:agent` | エージェントインフラストラクチャのみをデプロイ |
| `npm run ingest` | ナレッジベースにドキュメントをアップロード |
| `npm run dev` | Web UI 開発サーバーを起動 |
| `npm run clean` | すべての AWS リソースを削除 |

## データフロー
![travel data flow](docs/traveling_data_flow.png)


## アーキテクチャ
![travel arch](docs/Travel_Agent_VISA.png)

## デモ
![Travel Agent Demo](docs/demo.gif)

## 設定

### API キー (オプション)

アプリケーションは基本機能でそのまま動作します。オプションの API キーで追加機能を有効にできます:

- **SerpAPI** - 商品検索機能
- **Visa API** - 実際の決済連携 (デフォルトはモックモード)

セットアップ手順については、[デプロイガイド - API キー設定](DEPLOYMENT.md#api-keys-optional) を参照してください。


## クリーンアップ

デプロイしたすべての AWS リソースを削除するには:

```bash
npm run clean
```

部分的なクリーンアップオプションと手動リソース削除については、[デプロイガイド - クリーンアップ](DEPLOYMENT.md#clean-up) を参照してください。

## サポート

詳細なデプロイ手順、トラブルシューティング、設定オプションについては、[デプロイガイド](DEPLOYMENT.md) を参照してください。

> [!NOTE]
> このプロジェクトは教育目的のサンプル実装として提供されており、本番環境向けではありません。
> 組織のポリシーと AWS サービス規約への準拠を確認してください。
