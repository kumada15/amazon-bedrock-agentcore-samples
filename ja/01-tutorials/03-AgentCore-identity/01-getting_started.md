# Amazon Bedrock AgentCore Identity の使い方

## はじめに

Amazon Bedrock AgentCore Identity は、AIエージェントと自動化されたワークロード向けに特別に設計された包括的なIDと資格情報管理サービスです。ユーザーがエージェントを呼び出し、エージェントがユーザーに代わって外部リソースやサービスにアクセスできるようにしながら、厳格なセキュリティ管理と監査証跡を維持する、安全な認証、認可、資格情報管理機能を提供します。エージェントIDは、業界標準のワークロードIDパターンとの互換性を維持しながら、エージェント固有の機能を可能にする特殊な属性を持つワークロードIDとして実装されています。このサービスは Amazon Bedrock AgentCore とネイティブに統合され、エージェントアプリケーションに包括的なIDと資格情報管理を提供します。

## AgentCore Identity がサポートする認証タイプ

AgentCore Identity を使用すると、AgentCore Runtime でエージェントやツールを呼び出すユーザーおよびアプリケーションのインバウンドアクセス（インバウンド認証）を検証したり、AgentCore Gateway ターゲットへのアクセスを検証したりできます。また、エージェントまたは Gateway ターゲットから外部サービスへのアウトバウンドアクセス（アウトバウンド認証）を保護します。既存のIDプロバイダー（Amazon Cognitoなど）と統合しながら、独立して動作するエージェント、またはユーザーに代わって動作するエージェント（OAuth経由）の権限境界を強制します。

<div style="text-align:center">
    <img src="images/auth_basics1.png" width="75%" />
    <img src="images/auth_basics2.png" width="75%" />
</div>

* インバウンド：インバウンド認証は、ユーザーにエージェントやツールを呼び出すアクセス権を付与するために使用されます。ユーザーがアプリケーション内でエージェントを呼び出したいシナリオを考えてください。そのユーザーはエージェントを呼び出す権限を持っている必要があり、エージェントはタスクを実行する際にユーザーが誰であるかを保持する必要があります。インバウンド認証は、AWS IAM または OAuth の2つの認証メカニズムをサポートしています。OAuth を使用すると、エージェントビルダーはユーザーにIAM権限を付与することなくエージェントを呼び出すことができます。

* アウトバウンド：アウトバウンド認証は、エージェントまたは AgentCore Gateway に、ユーザーに代わって AWS サービスまたは外部リソースへのアクセスを付与するために使用されます。AgentCore Identity は、提供されたIAM実行ロールを使用して AWS リソースにアクセスします。外部リソースには OAuth 2レッグまたは3レッグアクセスフローが使用されます。
