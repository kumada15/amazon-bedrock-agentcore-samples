# 高度なオブザーバビリティ概念

このセクションでは、Amazon Bedrock AgentCore の高度なオブザーバビリティパターンと技術をカバーし、洗練されたカスタマイズされたモニタリングおよびデバッグ機能の実装を支援します。

## 利用可能なチュートリアル

### 01-custom-span-creation/

- **ノートブック**: `Custom_Span_Creation.ipynb`
- **説明**: 詳細な操作トレーシングのためのカスタムスパン作成を学ぶ
- **機能**: 手動スパン作成、カスタム属性
- **ユースケース**: きめ細かいモニタリング、デバッグ

### 02-data-protection/

- **ノートブック**: `data_protection.ipynb`
- **説明**: エージェントワークフローにおける機密情報の包括的なデータ保護を実装
- **機能**: Bedrock Guardrails 統合、CloudWatch Logs データ保護、PII 検出とマスキング
- **ユースケース**: コンプライアンス（GDPR、HIPAA、CCPA）、機密データ処理、プライバシー保護

## 学習内容

- **カスタムスパン作成**: 特定の操作に詳細なトレーシングを追加
- **スパン属性**: カスタムメタデータでトレースを強化
- **ネストされたスパン**: 階層的なトレース構造を作成
- **パフォーマンスモニタリング**: エージェントワークフローのボトルネックを特定
- **エラートラッキング**: 例外と障害をキャプチャしてトレース
- **データ保護**: ログとトレースにおける機密データの検出とマスキングを実装
- **コンプライアンス統合**: Bedrock Guardrails と CloudWatch データ保護を設定

## はじめに

1. チュートリアルディレクトリに移動
2. `.env.example` を `.env` にコピーして設定：
   - AWS 認証情報
   - CloudWatch ロググループ設定
   - OpenTelemetry 設定
3. AWS リージョンで CloudWatch Transaction Search を有効化
4. 依存関係をインストール：`pip install -r requirements.txt`
5. Jupyter ノートブックを開いて実行

## 前提条件

- 基本的な OpenTelemetry 概念の理解
- Amazon CloudWatch に関する知識
- エージェントフレームワークの経験（推奨）
- 適切な権限を持つ AWS アカウント

## カバーする高度なパターン

- **手動インストルメンテーション**: カスタムスパンを追加するタイミングと方法
- **カスタムメトリクス**: ドメイン固有の測定値の作成
- **データ保護ポリシー**: 機密情報フィルターの設定
- **多層セキュリティ**: Guardrails と CloudWatch データ保護の組み合わせ

## クリーンアップ

チュートリアル完了後：

1. サンプル中に作成した CloudWatch ロググループを削除
2. テストリソースを削除
3. 環境設定ファイルをクリーンアップ
