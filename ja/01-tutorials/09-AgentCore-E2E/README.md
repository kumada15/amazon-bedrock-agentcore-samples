# AgentCore を使用したエンドツーエンドのカスタマーサポートエージェント

このチュートリアルでは、Amazon Bedrock AgentCore サービスを使用して、カスタマーサポートエージェントをプロトタイプから本番環境に移行します。

## 構築するもの

シンプルなプロトタイプとして始まり、スケーラブルで安全なサンプルアプリケーションに進化する、完全なカスタマーサポートシステム。

最終的なシステムは、メモリ、共有ツール、およびWebインターフェースを備えた実際の顧客との会話を処理します。

> [!IMPORTANT]
> ここで提供されるサンプルは教育目的です。エージェント型ユースケースをプロトタイプから本番環境に移行するプロセスで、AgentCore の異なるサービスがどのように使用されるかを示しています。したがって、本番環境での直接使用を意図したものではありません。

**ジャーニー概要：**

- 基本的なエージェントプロトタイプから開始（20分）
- セッション間で会話メモリを追加（20分）
- 複数のエージェント間でツールを安全に共有（30分）
- 可観測性を備えて本番環境にデプロイ（30分）
- 継続的な品質評価を設定（10分）
- 顧客向けWebアプリを構築（20分）

## アーキテクチャ概要

このチュートリアルの6つのラボを終了すると、以下のアーキテクチャが作成されます

<div style="text-align:left">
    <img src="images/architecture_lab6_streamlit.png" width="100%"/>
</div>

## 前提条件

- Bedrockアクセスのある AWS アカウント
- Python 3.10以上
- 設定済みの AWS CLI
- Bedrock で Claude 3.7 Sonnet を有効化

## ラボ

### ラボ1：エージェントプロトタイプの作成

3つのコアツールを持つカスタマーサポートエージェントのプロトタイプを構築：

- 返品ポリシーの検索
- 製品情報の検索
- トラブルシューティングのためのWeb検索

**学ぶこと：** Strands Agents を使用した基本的なエージェント作成とツール統合

### ラボ2：メモリの追加

「金魚エージェント」を会話を記憶するエージェントに変換。

- 永続的な会話履歴
- 顧客の好みの抽出
- セッション間のコンテキスト認識

**学ぶこと：** 短期および長期の永続性のための AgentCore Memory

### ラボ3：Gateway と Identity でスケール

ローカルツールから共有されたエンタープライズ対応サービスへ移行。

- 集中化されたツール管理
- JWTベースの認証
- 既存の AWS Lambda 関数との統合

**学ぶこと：** 安全なツール共有のための AgentCore Gateway と AgentCore Identity

### ラボ4：本番環境へのデプロイ

完全な可観測性を備えて実際のトラフィックを処理するようにエージェントをデプロイ。

- フルマネージドデプロイメント
- セッションの継続性とセッションの分離
- CloudWatch Observability 統合

**学ぶこと：** 本番グレードの可観測性を備えた AgentCore Runtime

### ラボ5：エージェントパフォーマンスの評価

本番エージェントの継続的な品質モニタリングを設定。

- オンライン評価の設定
- 組み込みの品質メトリクス
- リアルタイムパフォーマンスダッシュボード

**学ぶこと：** 本番品質モニタリングのための AgentCore Evaluations

### ラボ6：顧客インターフェースの構築

顧客が実際に使用できるWebアプリを作成。

- Streamlitベースのチャットインターフェース
- リアルタイムレスポンスストリーミング
- セッション管理と認証

**学ぶこと：** 安全なエージェントエンドポイントとのフロントエンド統合

## はじめに

1. このリポジトリをクローン
2. 依存関係をインストール：`pip install -r requirements.txt`
3. AWS認証情報を設定
4. [ラボ1](lab-01-create-an-agent.ipynb)から開始

各ラボは前のラボの上に構築されますが、概念を理解していれば先にジャンプできます。

## アーキテクチャの進化

シンプルなローカルエージェントから本番システムへとアーキテクチャが成長する様子を見てください：

**ラボ1：** 組み込みツールを持つローカルエージェント
**ラボ2：** エージェント + 永続性のための AgentCore Memory
**ラボ3：** エージェント + AgentCore Memory + 共有ツールのための AgentCore Gateway と AgentCore Identity
**ラボ4：** AgentCore Runtime へのデプロイと AgentCore Observability による可観測性
**ラボ5：** AgentCore Evaluations による本番品質モニタリング
**ラボ6：** 認証を備えた顧客向けアプリケーション

構築する準備はできましたか？[ラボ1から開始 →](lab-01-create-an-agent.ipynb)
