# Bedrock AgentCore Cognito 認証セットアップ

このディレクトリには、Bedrock AgentCore アプリケーション用の AWS Cognito 認証をセットアップおよび管理するためのスクリプトが含まれています。

## クイックセットアップ

簡単にセットアップするには、セットアップスクリプトを使用してください：

```bash
./setup_cognito.sh
```

このスクリプトは以下を行います：
1. AWS 認証情報と必要なツール（AWS CLI、jq）を確認
2. 適切なデフォルト値で必要な情報を入力：
   - AWS リージョン
   - ユーザープール名
   - アプリクライアント名
   - テストユーザー認証情報
3. Cognito ユーザープールとアプリクライアントを作成
4. 指定された認証情報でテストユーザーを作成
5. すぐに使用できるアクセストークンを生成
6. すべての設定を簡単にアクセスできるファイルに保存

## 設定ファイル

セットアップスクリプトを実行すると、以下のファイルが作成されます：

- `cognito_config.json` - すべての設定詳細とアクセストークンを含む
- `cognito_result.md` - ドキュメント用のフォーマットされたセットアップ概要

## アクセストークンの更新

Cognito アクセストークンはデフォルトで 1 時間後に期限切れになります。トークンを更新するには：

```bash
./refresh_token.sh
```

これにより：
1. 設定ファイルに保存された認証情報を使用
2. Cognito から新しいアクセストークンをリクエスト
3. 設定ファイルを自動的に更新

## 必要な権限

これらのスクリプトを実行するには、AWS ユーザーに以下の権限が必要です：

- Amazon Cognito Identity Provider フルアクセス（`cognito-idp:*`）
- または最低限、以下の権限：
  - CreateUserPool
  - CreateUserPoolClient
  - AdminCreateUser
  - AdminSetUserPassword
  - InitiateAuth

## 前提条件

- 適切な権限で設定された AWS CLI
- 出力を解析するための jq（JSON プロセッサ）

## セキュリティに関する注意

- 作成されたユーザープールはセキュリティのベストプラクティスに従っています
- パスワードポリシーはセットアップスクリプトで調整可能
- 本番環境では、追加のセキュリティ対策を検討してください：
  - 多要素認証
  - カスタムパスワードポリシー
  - トークン取り消し戦略
