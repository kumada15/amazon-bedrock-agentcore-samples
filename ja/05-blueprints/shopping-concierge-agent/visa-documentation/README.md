# Visa 決済統合ドキュメント

このディレクトリには、Visa のトークン化とパスキー認証を AI エージェントアプリケーションに統合するための包括的なドキュメントが含まれています。

## ドキュメント概要

### 📖 [Visa 決済統合ガイド](visa-payment-integration-guide.md)
**ここから始めてください** - Visa 決済統合プロセスの完全なウォークスルーで、以下をカバーしています：
- アーキテクチャ概要（VTS、VIC、Auth iFrame）
- 前提条件と認証情報
- フェーズごとの実装手順
- データストレージの考慮事項
- セキュリティベストプラクティス

### 🔄 [旅行予約フロー図](travel-booking-sequence-diagram.md)
**旅行予約コンテキスト**における完全な決済フローを示すビジュアルシーケンス図：
- ユーザーがフライトを予約
- カードトークン化（初回設定）
- パスキー作成（初回設定）
- 決済認証と完了

### 🛍️ [ショッピングフロー図](shopping-sequence-diagram.md)
**ショッピングコンテキスト**における完全な決済フローを示すビジュアルシーケンス図：
- ユーザーが商品を購入
- カードトークン化（初回設定）
- パスキー作成（初回設定）
- 決済認証と完了

## クイックナビゲーション

### 初回実装の場合
1. [Visa 決済統合ガイド](visa-payment-integration-guide.md)を読んで全体のフローを理解
2. [旅行予約図](travel-booking-sequence-diagram.md)または[ショッピング図](shopping-sequence-diagram.md)を確認してシーケンスを視覚化
3. 詳細なステップバイステップの手順については Visa 決済統合ガイドを参照

### 特定のフローを理解するため
- **旅行/予約ユースケース** → [旅行予約図](travel-booking-sequence-diagram.md)
- **EC/ショッピングユースケース** → [ショッピング図](shopping-sequence-diagram.md)

### 技術的な詳細について
- **API エンドポイントとペイロード** → [Visa 決済統合ガイド](visa-payment-integration-guide.md)
- **データストレージ** → [Visa 決済統合ガイド - データストレージの考慮事項](visa-payment-integration-guide.md#data-storage-considerations)
- **セキュリティ** → [Visa 決済統合ガイド - セキュリティベストプラクティス](visa-payment-integration-guide.md#security-best-practices)

## 主要コンセプト

### 3 つの Visa サービス
- **VTS（Visa Token Service）** - カード番号を安全なトークンに変換し、デバイスバインディングを管理
- **VIC（Visa Intelligent Commerce）** - 決済トランザクションをオーケストレーションし、クリプトグラムを生成
- **Auth iFrame** - 安全なパスキー作成と認証インターフェースを提供

### 2 つのフェーズ
1. **初回設定**（フェーズ 2-3）
   - カードトークン化
   - パスキー作成とデバイスバインディング

2. **トランザクションごと**（フェーズ 4-5）
   - パスキー認証
   - 決済認証情報の生成
   - トランザクション完了

## コントリビューション

このドキュメントを更新する際は：
- すべての情報をソース API ドキュメントと照合して確認
- 推測的なセキュリティ説明の追加を避ける
- 実装の提案を維持（規範的な要件ではなく）
- フローが変更された場合は両方の図を更新
- 3 つのドキュメント全体で一貫性を維持
